<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding baohy</title>
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script|Itim|Lobster|Montserrat:500|Noto+Serif|Nunito|Patrick+Hand|Roboto+Mono:100,100i,300,300i,400,400i,500,500i,700,700i|Roboto+Slab|Saira" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background-image: url('Common/lotus-background.png'); /* Replace with the path to your background image */
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    .container-wrapper {
      position: relative;
    }
    .envelope-container, .baohy-container .invitation-container{
      perspective: 1000px;
      position: absolute;
      top: 50%;
      left: 50%;
    }
    .envelope-container {
      transform: translate(-50%, -50%);
    }

    .baohy-container {
      visibility: hidden;
      opacity: 0;
      transform: translate(0%, -50%);
    }
    .invitation-container {
      visibility: hidden;
      opacity: 0;
      transform: translate(0%, 50%);
    }

    .envelope-flipper, .baohy-flipper, .invitation-flipper {
      height: 600px;
      width: 360px;
      transition: transform 1.2s;
      transform-style: preserve-3d;
    }
    .envelope-flipper {
      z-index: 3;
    }
    .baohy-flipper {
      z-index: 2;
      transform-origin: left;
    }
    .invitation-flipper {
      z-index: 2;
    }

    .front, .back {
      backface-visibility: hidden;
      position: absolute;
      width: 100%;
      height: 100%;
    }
    .front {
      z-index: 2;
      transform: rotateY(0deg);
    }
    .back {
      transform: rotateY(-180deg);
    }
    .envelope-container:hover .envelope-flipper, .envelope-container.hover .envelope-flipper {
      transform: rotateY(-180deg);
    }
    .baohy-container:hover .baohy-flipper, .baohy-container.hover .baohy-flipper {
      transform: rotateY(180deg);
    }
    .invitation-container:hover .invitation-flipper, .invitation-container.hover .invitation-flipper {
      transform: rotateY(-180deg);
    }

    .invite-text {
      font-family: 'Dancing Script', cursive;
      font-size: 22px;
      font-weight: bold;
      position: absolute;
      top: 44%;
      left: 50%;
      transform: translate(-50%, -50%);
      white-space: nowrap;
      visibility: hidden;
      opacity: 0;
    }
  </style>
</head>
<body>

<div class="container-wrapper">
    <div class="envelope-container" onclick="this.classList.toggle('hover');">
        <div class="envelope-flipper" id="Envelope">
            <img class="front" src="Common/Envelope_Front.png" alt="Front of baohy Envelope">
            <img class="back" src="Common/Envelope_Back.png" alt="Back of baohy Envelope">
        </div>
    </div>

    <!-- make a hidden object of invitation-container -->
    <div class="invitation-container", id="Invitation_Container";>
        <div class="invitation-flipper" id="Invitation">
            <img class="front" src="DaNang/ThiepMoi_Front.png" alt="Front of Wedding Invitation">
            <img class="back" src="DaNang/ThiepMoi_Back.png" alt="Back of Wedding Invitation">
        </div>
    </div>

    <!-- make a hidden object of baohy-container -->
    <div class="baohy-container" id="BaoHy_Container";>
        <div class="baohy-flipper" id="BaoHy">
            <img class="back" src="DaNang/BaoHy_Back.png" alt="Front of Wedding Baohy">
            <img class="front" src="DaNang/BaoHy_Front.png" alt="Back of Wedding Baohy">
        </div>
    </div>

    <div class="invite-text" id="invitation_text">
      Thân mời quý khách/bạn
    </div>
    

    
</div>

<script>
    // Function to get query parameters from the URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    

    function setImageSources(location) {
        if (location === 'danang') {
            document.getElementById('BaoHy').getElementsByClassName('front')[0].src = 'Danang/BaoHy_Front.png';
            document.getElementById('BaoHy').getElementsByClassName('back')[0].src = 'Danang/BaoHy_Back.png';
            document.getElementById('Invitation').getElementsByClassName('front')[0].src = 'Danang/ThiepMoi_Front.png';
            document.getElementById('Invitation').getElementsByClassName('back')[0].src = 'Danang/ThiepMoi_Back.png';
        } else if (location === 'hanoi_md') {
            document.getElementById('BaoHy').getElementsByClassName('front')[0].src = 'Hanoi_MD/BaoHy_Front.png';
            document.getElementById('BaoHy').getElementsByClassName('back')[0].src = 'Hanoi_MD/BaoHy_Back.png';
            document.getElementById('Invitation').getElementsByClassName('front')[0].src = 'Hanoi_MD/ThiepMoi_Front.png';
            document.getElementById('Invitation').getElementsByClassName('back')[0].src = 'Hanoi_MD/ThiepMoi_Back.png';
        } else if (location == 'hanoi_mm') {
            document.getElementById('BaoHy').getElementsByClassName('front')[0].src = 'Hanoi_MM/BaoHy_Front.png';
            document.getElementById('BaoHy').getElementsByClassName('back')[0].src = 'Hanoi_MM/BaoHy_Back.png';
            document.getElementById('Invitation').getElementsByClassName('front')[0].src = 'Hanoi_MM/ThiepMoi_Front.png';
            document.getElementById('Invitation').getElementsByClassName('back')[0].src = 'Hanoi_MM/ThiepMoi_Back.png';
        } else if (location == 'hanoi_dd') {
            document.getElementById('BaoHy').getElementsByClassName('front')[0].src = 'Hanoi_DD/BaoHy_Front.png';
            document.getElementById('BaoHy').getElementsByClassName('back')[0].src = 'Hanoi_DD/BaoHy_Back.png';
            document.getElementById('Invitation').getElementsByClassName('front')[0].src = 'Hanoi_DD/ThiepMoi_Front.png';
            document.getElementById('Invitation').getElementsByClassName('back')[0].src = 'Hanoi_DD/ThiepMoi_Back.png';
        }
    }

    // Check the location parameter and set image sources
    const locationParam = getQueryParam('location');
    setImageSources(locationParam);

    const screen = document.querySelector('.container-wrapper');
    const envelopeObject = document.getElementById('Envelope');
    const baohyContainer = document.getElementById('BaoHy_Container');
    const baohyObject = document.getElementById('BaoHy');
    const invitationContainer = document.getElementById('Invitation_Container');
    const invitationObject = document.getElementById('Invitation');
    const inviteTextObject = document.getElementById('invitation_text');

    function showBaoHy() {
        baohyContainer.style.visibility = 'visible'; // Make the element visible
        baohyContainer.style.opacity = '1'; // Start the fade-in
        baohyContainer.style.transition = 'opacity 1.5s linear'; // Apply the transition
    }

    function showInvitation() {
        invitationContainer.style.visibility = 'visible'; // Make the element visible
        invitationContainer.style.opacity = '1'; // Start the fade-in
        invitationContainer.style.transition = 'opacity 0.5s linear'; // Apply the transition
    }

    function showInviteText() {
        inviteTextObject.style.visibility = 'visible';
        inviteTextObject.style.opacity = '1';
        inviteTextObject.style.transition = 'opacity 0.5s linear';
    }

    const guestId = getQueryParam('guestid');

    // Guest Dict Start
		var guest_dict = {'18c3e4a787b': 'Thân mời vợ chồng Suke',
			'18c3e547cd5': 'Thân mời vợ chồng Hưng Bi',
			'18c3e505347': 'Thân mời vợ chồng Dú',
			'18c3e53b4b4': 'Thân mời vợ chồng Tép',
			'18c44242556': 'Thân mời vợ chồng Trà Ly',
			'18c44234506': 'Thân mời vợ chồng Đạt Nho',
			'18c443220a8': 'Thân mời vợ chồng Trí Dũng',
			'18c44277b08': 'Thân mời vợ chồng anh Alex',
			'18c4439620a': 'Thân mời vợ chồng Quý',
			'18c4434620f': 'Thân mời em Nhung',
			'18c443b52e9': 'Thân mời em Ngân',
			'18c44445f1d': 'Thân mời vợ chồng anh Tùng',
			'18c44392904': 'Thân mời vợ chồng Lê Anh',
			'18c4442b015': 'Thân mời vợ chồng Việt Trần'};// Guest Dict End
    
    inviteText = guest_dict[guestId];

    function fetchInvitationText() {
      document.getElementById('invitation_text').innerHTML = inviteText;
    }
    

    envelopeObject.addEventListener('click', function() {
        // disable hovering
        this.onmouseenter = null;
        this.onmouseleave = null;
        this.classList.remove('hover');

        // Ensure the front of the envelope is showing when moving out
        this.style.transform = 'rotateY(0deg) translateY(100%)';
        this.style.opacity = '0';
        this.style.transition = 'transform 1.5s, opacity 1.5s';

        // make baohy-container and invitation-container visible
        showBaoHy();
        //  wait for 1.5s to show invitation-container
        setTimeout(showInvitation, 1500);

        // Remove the ability to trigger the flip on hover
        this.style.pointerEvents = 'none';
    });
    
    baohyObject.addEventListener('mouseenter', function() {
        // showInviteText();
        // wait for 1.5s to show invitation-container
        fetchInvitationText(guestId);
        setTimeout(showInviteText, 1500);
    });

    baohyObject.addEventListener('mouseleave', function() {
        console.log('baohy mouse leave');
        inviteTextObject.style.visibility = 'hidden';
        inviteTextObject.style.opacity = '0';
    });

</script>

</body>
</html>
